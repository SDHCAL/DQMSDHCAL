<dqm4hep>

    <archiver open="false" directory="/tmp" />
    
    <network>
        <runcontrol type="DimRunControlClient" name="SDHCALRunControl" />
        
        <eventcollector type="DimEventClient">
        	<parameter name="collectorName"> sdhcal_event_collector </parameter>
        	<parameter name="maxQueueSize"> 100 </parameter>
        	<parameter name="streamerName"> LCIOStreamer </parameter>
        </eventcollector>
        
        <monitorelementcollector name="sdhcal_me_collector"/>
    </network>
    
    <cycle type="TimerCycle" value="10" timeout="5" />

    <module type="AsicAnalysisModule" name="MyAsicAnalysisModule">
        
        <parameter name="ShouldProcessStreamout"> false </parameter>
        
        <Streamout>
        	<parameter name="InputCollectionName">  RU_XDAQ </parameter>
        	<parameter name="OutputCollectionName">  DHCALRawHits </parameter>
        	<parameter name="XDaqShift">  92 </parameter>
        </Streamout>
        
        <Trivent>
        	<parameter name="InputCollectionName">  DHCALRawHits </parameter>
        	<parameter name="OutputCollectionName">  SDHCAL_HIT </parameter>	
        	
        	<!-- To adjust ! -->
        	<parameter name="GeometryFile">  /home/rete/soft/DQMSDHCAL/config/setup_geometry_nov.xml </parameter> 
        	
        	<parameter name="LayerCut">  3 </parameter>
        	<parameter name="NoiseCut">  10 </parameter>
        	<parameter name="TimeWindow">  2 </parameter>
        	<parameter name="LayerGap">  0.9 </parameter>
        	<parameter name="ElecNoiseCut">  100000 </parameter>
        	<parameter name="Time2PreviousEventCut">  0 </parameter>
        	<parameter name="GainCorrectionMode">  false </parameter>
        	<parameter name="CherenkovWindow">  20 </parameter>
        	<parameter name="CherenkovLenght">  1 </parameter>
        	<parameter name="CherenkovDifId">  0 </parameter>
        	<parameter name="TreatCherenkov">  false </parameter>
        	<parameter name="CellSizeU">  10.408 </parameter>
        	<parameter name="CellSizeV">  10.408 </parameter>
        	
        	<!-- 26.131 for SDHCAL ; 55 at GIF++ -->
        	<parameter name="LayerThickness">  26.131 </parameter>
        </Trivent>
        
        <parameter name="NActiveLayers">  48 </parameter>
        <parameter name="InputCollectionName"> SDHCAL_HIT </parameter>
        
        <parameter name="AsicTable"> 
			4 3 2 1 
			5 6 7 8 
			12 11 10 9 
			13 14 15 16 
			20 19 18 17 
			21 22 23 24 
			28 27 26 25 
			29 30 31 32 
			36 35 34 33 
			37 38 39 40 
			44 43 42 41 
			45 46 47 48
        </parameter>
       
        <parameter name="DifList"> 
			181 94 30  174 175 176  158 142 141  129 118 119  164 152 151   74 61 75 
			156 111 110  102 177 103   133 136 134   128 120 121   65 64 58   148 72 73 
			78 79 60   44 43 113   243 242 241    186 127 154   147 70 71    47 139 140 
			143 77 76    159 91 36    179 178 183   41 42 67   137 46 138   131 173 144 
			189 184 160   172 167 171   146 135 145   185 170 180   187 188 190   169 165 166 
			155 57 50   153 108 25    51 56 109    107 150 116   126 124 49   117 149 115 
			48 45 114    98 93 40    92 97 100   62 106 132   101 35 99   122 123 130 
			163 161 162   104 29 112   59 53 54   96 90 27   95 8 5   63 87 18 
        </parameter>
        
        
		<monitorElement ID="EfficiencyMap"
			name="EfficiencyMap" path="/Layers/EfficiencyMaps/Thr1" type="TH2F" title="Efficiency map (thr 1)" 
			nBinsX="12" minX="0" maxX="12" nBinsY="12" minY="0" maxY="12"
			drawOption="colz" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="Efficiency2Map"
			name="EfficiencyMap" path="/Layers/EfficiencyMaps/Thr2" type="TH2F" title="Efficiency map (thr 2)" 
			nBinsX="12" minX="0" maxX="12" nBinsY="12" minY="0" maxY="12"
			drawOption="colz" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="Efficiency3Map"
			name="EfficiencyMap" path="/Layers/EfficiencyMaps/Thr3" type="TH2F" title="Efficiency map (thr 3)" 
			nBinsX="12" minX="0" maxX="12" nBinsY="12" minY="0" maxY="12"
			drawOption="colz" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="MultiplicityMap"
			name="MultiplicityMap" path="/Layers/MultiplicityMaps" type="TH2F" title="Multiplicity map" 
			nBinsX="12" minX="0" maxX="12" nBinsY="12" minY="0" maxY="12"
			drawOption="colz" resetPolicy="EndOfRun"/>
			
			
			
		<monitorElement ID="LayerEfficiency"
			name="LayerEfficiency" path="/Global/Thr1" type="user" ROOTClass="TGraph" 
			title="Layer efficiencies" drawOption="ap" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="LayerEfficiency2"
			name="LayerEfficiency" path="/Global/Thr2" type="user" ROOTClass="TGraph" 
			title="Layer efficiencies (thr 2)" drawOption="ap" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="LayerEfficiency3"
			name="LayerEfficiency" path="/Global/Thr3" type="user" ROOTClass="TGraph" 
			title="Layer efficiencies (thr 3)" drawOption="ap" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="LayerMultiplicity"
			name="LayerMultiplicity" path="/Global/Multiplicity" type="user" ROOTClass="TGraph" 
			title="Layer multiplicities" drawOption="ap" resetPolicy="EndOfRun"/>
			
			
			
		<monitorElement ID="AsicEfficiency"
			name="AsicEfficiency" path="/Global/Thr1" type="TH1F" title="Asic efficiencies" 
			nBins="101" min="0" max="1"
			resetPolicy="EndOfRun"/>
			
		<monitorElement ID="AsicEfficiency2"
			name="AsicEfficiency" path="/Global/Thr2" type="TH1F" title="Asic efficiencies (thr 2)" 
			nBins="101" min="0" max="1"
			resetPolicy="EndOfRun"/>
			
		<monitorElement ID="AsicEfficiency3"
			name="AsicEfficiency" path="/Global/Thr3" type="TH1F" title="Asic efficiencies (thr 3)" 
			nBins="101" min="0" max="1"
			resetPolicy="EndOfRun"/>
			
		<monitorElement ID="AsicMultiplicity"
			name="AsicMultiplicity" path="/Global/Multiplicity" type="TH1F" title="Asic multiplicities" 
			nBins="101" min="0" max="10"
			resetPolicy="EndOfRun"/>
			
			
			
		<monitorElement ID="StackedEfficiencyMap"
			name="StackedEfficiencyMap" path="/Global/Thr1" type="TH2F" title="Stacked efficiency map" 
			nBinsX="12" minX="0" maxX="12" nBinsY="12" minY="0" maxY="12"  
			drawOption="colz" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="StackedEfficiency2Map"
			name="StackedEfficiencyMap" path="/Global/Thr2" type="TH2F" title="Stacked efficiency map (thr 2)" 
			nBinsX="12" minX="0" maxX="12" nBinsY="12" minY="0" maxY="12"  
			drawOption="colz" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="StackedEfficiency3Map"
			name="StackedEfficiencyMap" path="/Global/Thr3" type="TH2F" title="Stacked efficiency map (thr 3)" 
			nBinsX="12" minX="0" maxX="12" nBinsY="12" minY="0" maxY="12"  
			drawOption="colz" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="StackedMultiplicityMap"
			name="StackedMultiplicityMap" path="/Global/Multiplicity" type="TH2F" title="Stacked multiplicity map" 
			nBinsX="12" minX="0" maxX="12" nBinsY="12" minY="0" maxY="12"
			drawOption="colz" resetPolicy="EndOfRun"/>
			
			
			
		<monitorElement ID="GlobalEfficiency"
			name="GlobalEfficiency" path="/Global/Thr1" type="float" title="Global efficiency" 
			value="0" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="GlobalEfficiency2"
			name="GlobalEfficiency" path="/Global/Thr2" type="float" title="Global efficiency (thr 2)" 
			value="0" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="GlobalEfficiency3"
			name="GlobalEfficiency" path="/Global/Thr3" type="float" title="Global efficiency (thr 3)" 
			value="0" resetPolicy="EndOfRun"/>
			
		<monitorElement ID="GlobalMultiplicity"
			name="GlobalMultiplicity" path="/Global/Multiplicity" type="float" title="Global multiplicities" 
			value="0" resetPolicy="EndOfRun"/>
			
			
			
		<monitorElement ID="NTracksPerAsic"
			name="NTracksPerAsic" path="/Global" type="TH1F" title="Number of rec tracks per asic" 
			nBins="10001" min="0" max="10000"
			resetPolicy="EndOfRun"/>
        
    </module>

</dqm4hep>
